CREATE TABLE USUARIO (
    CPF CHAR(11) NOT NULL PRIMARY KEY,
    NOME VARCHAR(50) NOT NULL,
    ENDERECO VARCHAR(100) NOT NULL,
    NUMERO_END VARCHAR(20) NOT NULL,
    BAIRRO VARCHAR(30) NOT NULL,
    CIDADE VARCHAR(30) NOT NULL,
    UF CHAR(2) NOT NULL,
    TELEFONE CHAR(11) NOT NULL,
    EMAIL VARCHAR(50) NOT NULL,
    SENHA VARCHAR(50) NOT NULL
    );

CREATE TABLE CONTRATO (
    ID_CONTRATO INT PRIMARY KEY AUTO_INCREMENT,
    DATA_CONTRATO DATE NOT NULL,
    VALOR_CONTRATO DECIMAL NOT NULL,
    CPF_TITULAR CHAR(11) NOT NULL,
    FOREIGN KEY (CPF_TITULAR) REFERENCES USUARIO(CPF)
    );

CREATE TABLE TIPO_SERVICO (
	ID_TIPO_SERVICO INT PRIMARY KEY AUTO_INCREMENT,
    DESCRICAO_TIPO VARCHAR(30) NOT NULL
);

CREATE TABLE SERVICO (
	ID_SERVICO INT PRIMARY KEY AUTO_INCREMENT,
    DESCRICAO_SERVICO VARCHAR(50) NOT NULL,
    VALOR_SERVICO DECIMAL NOT NULL,
    ID_TIPO_SERVICO INT NOT NULL,
    FOREIGN KEY (ID_TIPO_SERVICO) REFERENCES tipo_servico(ID_TIPO_SERVICO)
);

CREATE TABLE ITEM_CONTRATO (
	ID_ITEM_CONTRATO INT PRIMARY KEY AUTO_INCREMENT,
    VALOR_ITEM DECIMAL NOT NULL,
    ID_CONTRATO INT NOT NULL,
    ID_SERVICO INT NOT NULL,
    FOREIGN KEY (ID_CONTRATO) REFERENCES CONTRATO(ID_CONTRATO),
    FOREIGN KEY (ID_SERVICO) REFERENCES SERVICO(ID_SERVICO)
);

CREATE TABLE markers ( id INT NOT NULL AUTO_INCREMENT PRIMARY KEY , name VARCHAR( 60 ) NOT NULL , address VARCHAR( 80 ) NOT NULL , lat FLOAT( 10, 6 ) NOT NULL , lng FLOAT( 10, 6 ) NOT NULL , type VARCHAR( 30 ) NOT NULL ) ENGINE = MYISAM ;

INSERT INTO TIPO_SERVICO (DESCRICAO_TIPO) VALUES ('TV'); /* ID=1 */
INSERT INTO TIPO_SERVICO (DESCRICAO_TIPO) VALUES ('TELEFONE'); /* ID=2 */
INSERT INTO TIPO_SERVICO (DESCRICAO_TIPO) VALUES ('INTERNET'); /* ID=3 */

INSERT INTO SERVICO VALUES (DEFAULT,'P', 99.0, 1);
INSERT INTO SERVICO VALUES (DEFAULT,'M', 252.0, 1);
INSERT INTO SERVICO VALUES (DEFAULT,'G', 322.0, 1);

INSERT INTO SERVICO VALUES (DEFAULT,'P', 38.0, 2);
INSERT INTO SERVICO VALUES (DEFAULT,'M', 75.0, 2);
INSERT INTO SERVICO VALUES (DEFAULT,'G', 125.0, 2);

INSERT INTO SERVICO VALUES (DEFAULT,'P', 18.0, 3);
INSERT INTO SERVICO VALUES (DEFAULT,'M', 50.0, 3);
INSERT INTO SERVICO VALUES (DEFAULT,'G', 100.0, 3);
